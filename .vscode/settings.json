{
  "terminal.integrated.env.osx": {
    "PATH": "/Library/TeX/texbin:${env:PATH}"
  },
  "files.watcherExclude": {
    "**/output/**": true
  },

  // ===== PDF 查看器配置 =====
  // 使用外部查看器（Skim）
  "latex-workshop.view.pdf.viewer": "external",
  
  // 修复后的 Skim 正向搜索配置（简化参数避免 AppleScript 错误）
  "latex-workshop.view.pdf.external.viewer.command": "/Applications/Skim.app/Contents/SharedSupport/displayline",
  "latex-workshop.view.pdf.external.viewer.args": [
    "0",
    "%PDF%"
  ],
  
  // 引用跳转配置
  "latex-workshop.view.pdf.ref.viewer": "external",

  // 禁用内置 PDF 标签
  "latex-workshop.view.pdf.tab.openAfterBuild": false,

  // ===== 输出目录配置 =====
  "latex-workshop.latex.outDir": "%DIR%/output",
  
  // ===== 自动清理配置 =====
  "latex-workshop.latex.autoClean.run": "onBuilt",
  "latex-workshop.latex.clean.fileTypes": [
    "*.aux", "*.bbl", "*.bcf", "*.blg", "*.log", "*.out", "*.toc",
    "*.run.xml", "*.fdb_latexmk", "*.fls", "*.xdv",
    "*.nav", "*.snm", "*.vrb"
  ],

  // ===== SyncTeX 配置 =====
  "latex-workshop.synctex.afterBuild.enabled": true,
  "latex-workshop.synctex.path": "synctex",
  
  // PDF 缩放
  "latex-workshop.view.pdf.zoom": "auto",
  
  // ===== LaTeX 编译工具 =====
  "latex-workshop.latex.tools": [
    {
      "name": "latexmk-xelatex",
      "command": "latexmk",
      "args": [
        "-xelatex",
        "-synctex=1",
        "-interaction=nonstopmode",
        "-file-line-error",
        "-outdir=%OUTDIR%",
        "%DOC%"
      ]
    }
  ],
  
  // ===== LaTeX 编译配方 =====
  "latex-workshop.latex.recipes": [
    {
      "name": "latexmk (XeLaTeX)",
      "tools": ["latexmk-xelatex"]
    }
  ]
}