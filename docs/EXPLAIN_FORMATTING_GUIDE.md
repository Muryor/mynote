# 详解格式化指南（精简版）

> 完整细节、全部示例与技术参数请参见 `EXPLAIN_FULL.md`。本文件仅保留核心用法与决策指引。

## 目的

为长解析提供更清晰的层次结构：段落分隔 + 步骤标记（`\exstep`）。

## 核心语法

```latex
% 段落：空行分隔即可
\explain{第一段...\n\n第二段...}

% 自动编号步骤
\exstep 证明关键结论
\exstep 推导函数表达式

% 自定义标签
\exstep[法一]
\exstep[法二：导数]
\exstep[小结]
```

## 何时使用

| 解析长度 | 推荐形式 | 说明 |
|----------|----------|------|
| 1–3 行 | 原样 | 单选 / 简单填空 |
| 3–5 行 | 空行分段 | 中等长度结构化说明 |
| 5–10 行 | `\exstep` 自动编号 | 多步骤推导 / 分段证明 |
| >10 行 或多解法 | `\exstep[标签]` | 方案切换 / 复杂证明 |

## 快速示例

```latex
\explain{
已知 ... \n\n
\exstep 求导得 ... \n\exstep 判符号得单调性 \n\exstep[结论] 最大值为 3\sqrt{3}
}
```

## 设计原则

- 段落=宏观逻辑块；`\exstep`=显式步骤 / 解法切换。
- 自定义标签优先使用简短名：`法一`、`向量法`、`极值判定`。
- 避免在行内数学 `\(...\)` 中插入 `\exstep`。
- 解析过短不强行引入步骤编号。

## 常见误用（应避免）

| 误用 | 问题 | 正确方式 |
|------|------|----------|
| 每行都用 `\exstep` | 视觉噪音 | 只标记关键跳点 |
| 标签过长 | 排版拥挤 | 用精炼概念词 |
| 在公式内部插入 | 语法错误 | 步骤写在公式外部 |

## 相关引用

- 完整示例：`EXPLAIN_FULL.md`
- 样式来源：`qmeta.sty`
- 工作流：`workflow.md`

## 版本

精简版同步：v3.2（源更新日期：2025-11-20）

