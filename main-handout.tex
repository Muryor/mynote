% ========================= Handout main =========================
\documentclass[lang=cn, color=blue, mode=fancy]{elegantbook}
% Let LaTeX search in ./styles and ./settings for packages
\makeatletter
\def\input@path{{./styles/}{./settings/}}
\makeatother

% 字体/颜色等基础预设
\usepackage{preamble}

% 讲义盒子 + 题目统一接口
\usepackage[cover=false,infobar=false,authorhead=true,theme=mint]{handoutx}
\usepackage{examx} % 让 problem 也能写 \topics/\difficulty/\explain

\input{metadata.tex}

\begin{document}
  \frontmatter
  % \maketitle is now empty due to cover=false option
  \tableofcontents
  \mainmatter
  
  % Content: dynamically loaded from metadata.tex configuration
  % The actual handout file is specified by \handoutSourceFile in settings/metadata.tex
  \ifx\handoutSourceFile\undefined
    \PackageError{handoutx}{%
      No handoutSourceFile defined in settings/metadata.tex.%
    }{%
      Please define \protect\handoutSourceFile in settings/metadata.tex to specify which handout to compile.%
    }
  \else
    \ifx\handoutSourceFile\@empty
      \PackageWarning{handoutx}{handoutSourceFile is empty, no content loaded}
    \else
      % Load the handout content specified in metadata
      \input{\handoutSourceFile}
    \fi
  \fi
\end{document}